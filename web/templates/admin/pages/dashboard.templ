package pages

import (
	"yourvoice/internal/utils"
	"yourvoice/web/templates/admin"
	"yourvoice/web/templates/admin/components/basic"
)

templ Dashboard() {
	@admin.Layout("Dashboard") {
		<div class="p-4 sm:p-6 lg:p-8">
			<!-- System Overview Card -->
			@basic.Card(basic.CardProps{
				Title:     "System Overview",
				Icon:      "ğŸ ",
				Indicator: &basic.Indicator{Text: "System Healthy", Style: utils.IndicatorStyleSuccess},
				Action:    basic.ActionLink(basic.LinkActionProps{Label: "View Details", Href: "/admin/reports", Icon: "ğŸ”§", Style: utils.ActionStyleSecondary}),
			}) {
				<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4">
					@basic.StatCard(basic.StatCardProps{
						Title:    "Active Events",
						Value:    "5",
						Icon:     "ğŸ“…",
						Subtitle: "3 voting, 2 messaging",
						Trend:    &basic.Trend{Value: 12, Positive: true},
					})
					@basic.StatCard(basic.StatCardProps{
						Title:    "Today's Activity",
						Value:    "156",
						Icon:     "ğŸ“Š",
						Subtitle: "User interactions",
						Trend:    &basic.Trend{Value: 8, Positive: true},
					})
					@basic.StatCard(basic.StatCardProps{
						Title:    "Total Participants",
						Value:    "1,247",
						Icon:     "ğŸ‘¥",
						Subtitle: "Verified users",
						Trend:    &basic.Trend{Value: 15, Positive: true},
					})
				</div>
			}
			<div class="grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6 mt-6 sm:mt-8">
				<!-- Voting System Card -->
				@basic.Card(basic.CardProps{
					Title:     "Voting System",
					Icon:      "ğŸ—³ï¸",
					Indicator: &basic.Indicator{Text: "3 Active", Style: utils.IndicatorStyleSuccess},
					Action:    basic.ActionLink(basic.LinkActionProps{Label: "Manage Events", Href: "/admin/vote/events", Icon: "ğŸ”§", Style: utils.ActionStyleSecondary}),
				}) {
					<div class="grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4">
						@basic.StatCard(basic.StatCardProps{Title: "Total Events", Value: "12", Icon: "ğŸ“Š"})
						@basic.StatCard(basic.StatCardProps{Title: "Total Votes", Value: "1,456", Icon: "ğŸ—³ï¸"})
						@basic.StatCard(basic.StatCardProps{Title: "Turnout Rate", Value: "78%", Icon: "ğŸ“ˆ"})
					</div>
					<div class="mt-4 p-4 bg-slate-600 rounded-lg">
						<div class="flex items-center space-x-3">
							<span class="text-2xl">ğŸ—³ï¸</span>
							<div class="flex-1">
								<h4 class="font-medium text-slate-100">Active Election</h4>
								<p class="text-sm text-slate-300">
									Presidential Election 2024 is currently
									accepting votes. 1,456 votes cast so far.
								</p>
							</div>
							<a href="/admin/vote-events/1" class="text-sm text-blue-400 hover:text-blue-300">
								View Details
							</a>
						</div>
					</div>
				}
				<!-- Messaging System Card -->
				@basic.Card(basic.CardProps{
					Title:     "Feedback System",
					Icon:      "ğŸ’¬",
					Indicator: &basic.Indicator{Text: "2 Active", Style: utils.IndicatorStyleSuccess},
					Action:    basic.ActionLink(basic.LinkActionProps{Label: "Manage Sessions", Href: "/admin/feedback/sessions", Icon: "ğŸ”§", Style: utils.ActionStyleSecondary}),
				}) {
					<div class="grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4">
						@basic.StatCard(basic.StatCardProps{Title: "Total Events", Value: "8", Icon: "ğŸ“Š"})
						@basic.StatCard(basic.StatCardProps{Title: "Total Messages", Value: "892", Icon: "ğŸ’¬"})
						@basic.StatCard(basic.StatCardProps{Title: "Engagement", Value: "82%", Icon: "ğŸ“ˆ"})
					</div>
					<div class="mt-4 p-4 bg-slate-600 rounded-lg">
						<div class="flex items-center space-x-3">
							<span class="text-2xl">ğŸ’¬</span>
							<div class="flex-1">
								<h4 class="font-medium text-slate-100">Active Feedback Sessions</h4>
								<p class="text-sm text-slate-300">
									2 feedback sessions collecting community input.
									324 messages received.
								</p>
							</div>
							<a href="/admin/messages" class="text-sm text-purple-400 hover:text-purple-300">
								View Messages
							</a>
						</div>
					</div>
				}
			</div>
			<!-- Recent Activity Card -->
			<div class="mt-6 sm:mt-8">
				@basic.Card(basic.CardProps{
					Title:  "Recent Activity",
					Icon:   "ğŸ“‹",
					Action: basic.ActionLink(basic.LinkActionProps{Label: "View Detailed Logs", Href: "/admin/logs", Icon: "ğŸ“‹", Style: utils.ActionStyleGhost}),
				}) {
					<div class="space-y-4">
						@ActivityItem("ğŸ—³ï¸", "New vote event created: \"City Council Election 2024\"", "Admin", "2 hours ago")
						@ActivityItem("ğŸ’¬", "Message event \"Public Feedback\" opened", "System", "4 hours ago")
						@ActivityItem("ğŸ‘¥", "3 new candidates registered", "Admin", "1 day ago")
						@ActivityItem("ğŸ”", "Cryptographic verification completed for 156 votes", "System", "1 day ago")
						@ActivityItem("ğŸ“Š", "Weekly analytics report generated", "System", "2 days ago")
					</div>
				}
			</div>
		</div>
	}
}

// Activity Item Component
templ ActivityItem(icon, description, user, time string) {
	<div class="flex items-center space-x-4">
		<div class="flex-shrink-0">
			<div class="w-8 h-8 bg-slate-600 rounded-full flex items-center justify-center">
				<span class="text-sm">{ icon }</span>
			</div>
		</div>
		<div class="flex-1 min-w-0">
			<p class="text-sm text-slate-100">{ description }</p>
			<div class="flex items-center space-x-2 text-xs text-slate-400">
				if user != "" {
					<span>{ user }</span>
				}
				<span>{ time }</span>
			</div>
		</div>
		<div class="flex-shrink-0">
			<button class="text-sm text-blue-400 hover:text-blue-300">View</button>
		</div>
	</div>
}
